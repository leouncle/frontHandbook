<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.45">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/frontHandbook/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/frontHandbook/images/icons/favicon-32x32.png"><link rel="manifest" href="/frontHandbook/manifest.webmanifest"><meta name="application-name" content="frontHandbook"><meta name="apple-mobile-web-app-title" content="frontHandbook"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/frontHandbook/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/frontHandbook/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>js | 前端项目手册</title><meta name="description" content="leouncle's front handbook">
    <link rel="modulepreload" href="/frontHandbook/assets/app.1d2f7275.js"><link rel="modulepreload" href="/frontHandbook/assets/js.html.34253ba1.js"><link rel="modulepreload" href="/frontHandbook/assets/js.html.252d7db0.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.25c25981.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.558aae2e.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar1.html.4ce5a027.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar2.html.dd44d8d9.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar3.html.51dbe4ec.js"><link rel="prefetch" href="/frontHandbook/assets/earlyComplete.html.9569c449.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.e30d2014.js"><link rel="prefetch" href="/frontHandbook/assets/business.html.f4c7bcec.js"><link rel="prefetch" href="/frontHandbook/assets/git.html.699bd6a3.js"><link rel="prefetch" href="/frontHandbook/assets/work.html.2ff15753.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.f3c755e3.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar.html.9f4daa80.js"><link rel="prefetch" href="/frontHandbook/assets/floodEra.html.1800b488.js"><link rel="prefetch" href="/frontHandbook/assets/jQuery.html.02acaae9.js"><link rel="prefetch" href="/frontHandbook/assets/jsEcology.html.3d3cb23c.js"><link rel="prefetch" href="/frontHandbook/assets/nodejs_jquery.html.0c2945da.js"><link rel="prefetch" href="/frontHandbook/assets/prototype.html.3b914561.js"><link rel="prefetch" href="/frontHandbook/assets/vue_react_angular.html.7a2cacfd.js"><link rel="prefetch" href="/frontHandbook/assets/vuejs.html.102ded1d.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.ae455567.js"><link rel="prefetch" href="/frontHandbook/assets/css.html.ed4c1205.js"><link rel="prefetch" href="/frontHandbook/assets/engineering.html.aadc35f2.js"><link rel="prefetch" href="/frontHandbook/assets/html.html.0bf41103.js"><link rel="prefetch" href="/frontHandbook/assets/http.html.be3f4250.js"><link rel="prefetch" href="/frontHandbook/assets/react.html.71d5a80f.js"><link rel="prefetch" href="/frontHandbook/assets/vue2.html.80542629.js"><link rel="prefetch" href="/frontHandbook/assets/vue3.html.d1bcdca0.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.28f829b3.js"><link rel="prefetch" href="/frontHandbook/assets/components.html.5d1a0234.js"><link rel="prefetch" href="/frontHandbook/assets/compositionApi.html.a9445a8f.js"><link rel="prefetch" href="/frontHandbook/assets/env.html.bc4b99fd.js"><link rel="prefetch" href="/frontHandbook/assets/mockApi.html.ca2f0cf4.js"><link rel="prefetch" href="/frontHandbook/assets/style.html.e446e6c0.js"><link rel="prefetch" href="/frontHandbook/assets/countTo.html.57b9a7eb.js"><link rel="prefetch" href="/frontHandbook/assets/dragable.html.c1818abf.js"><link rel="prefetch" href="/frontHandbook/assets/echarts.html.41f5792a.js"><link rel="prefetch" href="/frontHandbook/assets/filter_directive.html.ead8eb04.js"><link rel="prefetch" href="/frontHandbook/assets/formTable.html.46f8a6f8.js"><link rel="prefetch" href="/frontHandbook/assets/svgIcon.html.b9accc6f.js"><link rel="prefetch" href="/frontHandbook/assets/404.html.93146c89.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.f3b5e979.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.ca76fd3f.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar1.html.c229d26e.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar2.html.17d358b5.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar3.html.c473f992.js"><link rel="prefetch" href="/frontHandbook/assets/earlyComplete.html.09fb85d5.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.e3da51c3.js"><link rel="prefetch" href="/frontHandbook/assets/business.html.55f794cd.js"><link rel="prefetch" href="/frontHandbook/assets/git.html.07bb25d4.js"><link rel="prefetch" href="/frontHandbook/assets/work.html.04b03d71.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.209a7a05.js"><link rel="prefetch" href="/frontHandbook/assets/browserWar.html.db261bda.js"><link rel="prefetch" href="/frontHandbook/assets/floodEra.html.53ca574b.js"><link rel="prefetch" href="/frontHandbook/assets/jQuery.html.35584baf.js"><link rel="prefetch" href="/frontHandbook/assets/jsEcology.html.54a07857.js"><link rel="prefetch" href="/frontHandbook/assets/nodejs_jquery.html.32161b2c.js"><link rel="prefetch" href="/frontHandbook/assets/prototype.html.543e95f7.js"><link rel="prefetch" href="/frontHandbook/assets/vue_react_angular.html.61a22e31.js"><link rel="prefetch" href="/frontHandbook/assets/vuejs.html.7fa198b2.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.08d684af.js"><link rel="prefetch" href="/frontHandbook/assets/css.html.919f6941.js"><link rel="prefetch" href="/frontHandbook/assets/engineering.html.74a5bb8e.js"><link rel="prefetch" href="/frontHandbook/assets/html.html.0a8ee3d2.js"><link rel="prefetch" href="/frontHandbook/assets/http.html.65b49bf4.js"><link rel="prefetch" href="/frontHandbook/assets/react.html.f472e972.js"><link rel="prefetch" href="/frontHandbook/assets/vue2.html.fa02c816.js"><link rel="prefetch" href="/frontHandbook/assets/vue3.html.0267c03c.js"><link rel="prefetch" href="/frontHandbook/assets/index.html.0d0390f7.js"><link rel="prefetch" href="/frontHandbook/assets/components.html.a74189cf.js"><link rel="prefetch" href="/frontHandbook/assets/compositionApi.html.1a624f71.js"><link rel="prefetch" href="/frontHandbook/assets/env.html.45ac9e6f.js"><link rel="prefetch" href="/frontHandbook/assets/mockApi.html.de75fa13.js"><link rel="prefetch" href="/frontHandbook/assets/style.html.975c0a80.js"><link rel="prefetch" href="/frontHandbook/assets/countTo.html.14e22fa4.js"><link rel="prefetch" href="/frontHandbook/assets/dragable.html.8ceba16b.js"><link rel="prefetch" href="/frontHandbook/assets/echarts.html.37ddf83e.js"><link rel="prefetch" href="/frontHandbook/assets/filter_directive.html.ad4069d5.js"><link rel="prefetch" href="/frontHandbook/assets/formTable.html.1550a155.js"><link rel="prefetch" href="/frontHandbook/assets/svgIcon.html.ecaef612.js"><link rel="prefetch" href="/frontHandbook/assets/404.html.2df48d51.js"><link rel="prefetch" href="/frontHandbook/assets/404.319be1b9.js"><link rel="prefetch" href="/frontHandbook/assets/Layout.49035b2e.js">
    <link rel="stylesheet" href="/frontHandbook/assets/style.84478f0b.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/frontHandbook/" class=""><img class="logo" src="/frontHandbook/images/logo.png" alt="前端项目手册"><span class="site-name can-hide">前端项目手册</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/frontHandbook/projectIntro/" class="" aria-label="项目介绍"><!--[--><!--]--> 项目介绍 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/devDoc/" class="" aria-label="开发文档"><!--[--><!--]--> 开发文档 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/frontHistory/" class="" aria-label="前端简史"><!--[--><!--]--> 前端简史 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/browserHistory/" class="" aria-label="浏览器发展史"><!--[--><!--]--> 浏览器发展史 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/interview/" class="router-link-active" aria-label="面试题"><!--[--><!--]--> 面试题 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/leouncle/frontHandbook" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索文档" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/frontHandbook/projectIntro/" class="" aria-label="项目介绍"><!--[--><!--]--> 项目介绍 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/devDoc/" class="" aria-label="开发文档"><!--[--><!--]--> 开发文档 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/frontHistory/" class="" aria-label="前端简史"><!--[--><!--]--> 前端简史 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/browserHistory/" class="" aria-label="浏览器发展史"><!--[--><!--]--> 浏览器发展史 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frontHandbook/interview/" class="router-link-active" aria-label="面试题"><!--[--><!--]--> 面试题 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/leouncle/frontHandbook" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">面试题 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/frontHandbook/interview/" class="router-link-active sidebar-item" aria-label="/interview/README.md"><!--[--><!--]--> /interview/README.md <!--[--><!--]--></a><!----></li><li><a href="/frontHandbook/interview/html.html" class="sidebar-item" aria-label="html"><!--[--><!--]--> html <!--[--><!--]--></a><!----></li><li><a href="/frontHandbook/interview/css.html" class="sidebar-item" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="js"><!--[--><!--]--> js <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontHandbook/interview/js.html#实现一个深拷贝" class="router-link-active router-link-exact-active sidebar-item" aria-label="实现一个深拷贝"><!--[--><!--]--> 实现一个深拷贝 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frontHandbook/interview/js.html#object-assign" class="router-link-active router-link-exact-active sidebar-item" aria-label="Object.assign"><!--[--><!--]--> Object.assign <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#json实现的深拷贝" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSON实现的深拷贝"><!--[--><!--]--> JSON实现的深拷贝 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#jquery的-extend" class="router-link-active router-link-exact-active sidebar-item" aria-label="jQuery的 extend"><!--[--><!--]--> jQuery的 extend <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#messagechannel" class="router-link-active router-link-exact-active sidebar-item" aria-label="MessageChannel"><!--[--><!--]--> MessageChannel <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#递归实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="递归实现"><!--[--><!--]--> 递归实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#解决循环引用的递归实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="解决循环引用的递归实现"><!--[--><!--]--> 解决循环引用的递归实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#lodash的-clonedeep" class="router-link-active router-link-exact-active sidebar-item" aria-label="lodash的 _.cloneDeep()"><!--[--><!--]--> lodash的 _.cloneDeep() <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#发布者订阅模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="发布者订阅模式"><!--[--><!--]--> 发布者订阅模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#防抖节流" class="router-link-active router-link-exact-active sidebar-item" aria-label="防抖节流"><!--[--><!--]--> 防抖节流 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frontHandbook/interview/js.html#lazyman-的实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="Lazyman 的实现"><!--[--><!--]--> Lazyman 的实现 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/frontHandbook/interview/vue2.html" class="sidebar-item" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a><!----></li><li><a href="/frontHandbook/interview/vue3.html" class="sidebar-item" aria-label="/interview/vue3.md"><!--[--><!--]--> /interview/vue3.md <!--[--><!--]--></a><!----></li><li><a href="/frontHandbook/interview/react.html" class="sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----></li><li><a href="/frontHandbook/interview/http.html" class="sidebar-item" aria-label="http"><!--[--><!--]--> http <!--[--><!--]--></a><!----></li><li><a href="/frontHandbook/interview/engineering.html" class="sidebar-item" aria-label="工程化"><!--[--><!--]--> 工程化 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="js" tabindex="-1"><a class="header-anchor" href="#js" aria-hidden="true">#</a> js</h1><h2 id="实现一个深拷贝" tabindex="-1"><a class="header-anchor" href="#实现一个深拷贝" aria-hidden="true">#</a> 实现一个深拷贝</h2><h3 id="object-assign" tabindex="-1"><a class="header-anchor" href="#object-assign" aria-hidden="true">#</a> <code>Object.assign</code></h3><p><code>Object.assign</code>默认是对对象进行深拷贝的，但是我们需要注意的是，它只对最外层的进行深拷贝，也就是当对象内嵌套有对象的时候，被嵌套的对象进行的还是浅拷贝；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">cloneDeepAssign</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//Object.assign({},obj)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（温馨提示：数组拷贝方法当中，使用 <code>...</code>、<code>slice</code>、<code>concat</code>等进行拷贝也是一样的效果，只深拷贝最外层）</p><p>同时，我们知道 <code>Object.assign</code>针对的是对象自身可枚举的属性，对于不可枚举的没有效果；</p><p>所以，当我们对于一个层次单一对象的时候，可以考虑这种方法，简单快捷。（试过了，也不支持 <code>undefined</code>）</p><h3 id="json实现的深拷贝" tabindex="-1"><a class="header-anchor" href="#json实现的深拷贝" aria-hidden="true">#</a> <code>JSON</code>实现的深拷贝</h3><p>这是我们最最最常提到的一种深拷贝的方式，一般大部分的深拷贝都可以用 <code>JSON</code>的方式进行解决，本质是因为 <code>JSON</code>会自己去构建新的内存来存放新对象。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">cloneDeepJson</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但是我们要注意的是：</p><ul><li>会忽略 <code>undefined</code>和 <code>symbol</code>；</li><li>不可以对 <code>Function</code>进行拷贝，因为 <code>JSON</code>格式字符串不支持 <code>Function</code>，在序列化的时候会自动删除；</li><li>诸如 <code>Map</code>, <code>Set</code>, <code>RegExp</code>, <code>Date</code>, <code>ArrayBuffer </code>和其他内置类型在进行序列化时会丢失；</li><li>不支持循环引用对象的拷贝;（循环引用的可以大概地理解为一个对象里面的某一个属性的值是它自己）</li></ul><h3 id="jquery的-extend" tabindex="-1"><a class="header-anchor" href="#jquery的-extend" aria-hidden="true">#</a> <code>jQuery</code>的 <code>extend</code></h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newArray <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>显而易见，最大的缺点就是我们还需要引入 <code>jQuery</code>库了，所以也不太常用；感兴趣的友友，可以为您指路-&gt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fjquery.cuishifeng.cn%2FjQuery.extend.html" title="https://jquery.cuishifeng.cn/jQuery.extend.html" target="_blank" rel="noopener noreferrer">$.extend([d],tgt,obj1,[objN]) | jQuery API 3.2 中文文档 | jQuery API 在线手册 (cuishifeng.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="messagechannel" tabindex="-1"><a class="header-anchor" href="#messagechannel" aria-hidden="true">#</a> <code>MessageChannel</code></h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> port1<span class="token punctuation">,</span> port2 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    port2<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    port1<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">deepCopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">copy</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 异步的</span>
  <span class="token keyword">let</span> copyObj <span class="token operator">=</span> copy<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copyObj<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copyObj <span class="token operator">==</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（个人感觉这种方法还挺有意思的，如果面试的讲出来的话，应该会给面试官一个小惊喜 🙌）</p><p>缺点：最大的缺点就是异步的，同时也无法支持 <code>Function</code></p><p>另外，如果对 <code>MessageChannel</code>感兴趣的友友，为您推荐一篇简单易懂的小文章-&gt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F4f07ef18b5d7" title="https://www.jianshu.com/p/4f07ef18b5d7" target="_blank" rel="noopener noreferrer">MessageChannel 是什么，怎么使用？ - 简书 (jianshu.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="递归实现" tabindex="-1"><a class="header-anchor" href="#递归实现" aria-hidden="true">#</a> 递归实现</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">cloneDeepDi</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    data <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">cloneDeepDi</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这也是我们最最最最常用的一种解决方案，面试必备，所以扪心自问，你把它写的滚瓜烂熟了嘛？</p><p>虽然但是，它也是有缺点的，就是不能解决循环引用的问题，一旦出现了循环引用，就死循环了！</p><h3 id="解决循环引用的递归实现" tabindex="-1"><a class="header-anchor" href="#解决循环引用的递归实现" aria-hidden="true">#</a> 解决循环引用的递归实现</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> parent <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建一个新对象</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">,</span>
    key <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    temp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    _parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>
  <span class="token comment">// 该字段有父级则需要追溯该字段的父级</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>_parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果该字段引用了它的父级则为循环引用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_parent<span class="token punctuation">.</span>originalParent <span class="token operator">===</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 循环引用直接返回同级的新对象</span>
      <span class="token keyword">return</span> _parent<span class="token punctuation">.</span>currentParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    _parent <span class="token operator">=</span> _parent<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    temp <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果字段的值也是一个对象</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> temp <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 递归执行深拷贝 将同级的待拷贝对象与新对象传递给 parent 方便追溯循环引用</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">DeepCopy</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">originalParent</span><span class="token operator">:</span> obj<span class="token punctuation">,</span>
        <span class="token literal-property property">currentParent</span><span class="token operator">:</span> result<span class="token punctuation">,</span>
        <span class="token literal-property property">parent</span><span class="token operator">:</span> parent<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>大致的思路是：判断一个对象的字段是否引用了这个对象或这个对象的任意父级，如果引用了父级，那么就直接返回同级的新对象，反之，进行递归的那套流程。</p><p>但其实，还有一种情况是没有解决的，就是子对象间的互相引用，不理解什么意思的友友，可以看-&gt;<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F23251162" title="https://zhuanlan.zhihu.com/p/23251162" target="_blank" rel="noopener noreferrer">Javascript 之深拷贝 - 知乎 (zhihu.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的后半部分的内容，对应也写给出来解决方案；（鄙人懒，就不赘述了 🤶）</p><h3 id="lodash的-clonedeep" tabindex="-1"><a class="header-anchor" href="#lodash的-clonedeep" aria-hidden="true">#</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Flodash.com%2F" title="https://lodash.com/" target="_blank" rel="noopener noreferrer">lodash<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的 <code>_.cloneDeep()</code></h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> _ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">cloneDeep</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>b<span class="token punctuation">.</span>f <span class="token operator">===</span> obj2<span class="token punctuation">.</span>b<span class="token punctuation">.</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这是最最最最完美的深拷贝的方式，它已经将会出现问题的各种情况都考虑在内了，所以在日常项目开发当中，建议使用这种成熟的解决方案；关于原理分析，鄙人无能，只能为各位大佬指个路</p><h2 id="发布者订阅模式" tabindex="-1"><a class="header-anchor" href="#发布者订阅模式" aria-hidden="true">#</a> 发布者订阅模式</h2><h2 id="防抖节流" tabindex="-1"><a class="header-anchor" href="#防抖节流" aria-hidden="true">#</a> 防抖节流</h2><p>防抖和节流都是为了解决高频触发事件而产生的性能问题。</p><p>防抖是指在一定时间内，如果事件持续触发，则只执行最后一次事件，常用于输入框搜索或者页面 resize 等场景。</p><p>节流是指在一定时间内，事件只能触发一次，常用于滚动条滚动或者页面 resize 等场景。</p><p>下面分别介绍如何手写防抖和节流函数。</p><ol><li>手写防抖</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;searching...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> debounceSearch <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>search<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span> debounceSearch<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>手写节流</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">scroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;scrolling...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> throttleScroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>scroll<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;scroll&#39;</span><span class="token punctuation">,</span> throttleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在实际应用中，防抖和节流函数可以帮助我们减少函数执行的次数，从而提高性能和用户体验。需要根据实际场景选择合适的函数来解决问题</p><h2 id="lazyman-的实现" tabindex="-1"><a class="header-anchor" href="#lazyman-的实现" aria-hidden="true">#</a> Lazyman 的实现</h2><p>Lazyman 是一个模拟人的行为的小程序，可以让你在不同的时间执行不同的任务，类似于一个定时器。比如可以让它在某个时间点打印一段文字，或者在一定时间间隔内打印多段文字。</p><p>以下是一个简单的 Lazyman 的实现：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Lazyman</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi I&#39;m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> task <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    task <span class="token operator">&amp;&amp;</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Wake up after </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sleepFirst</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Wake up after </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">eat</span><span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Eat </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>food<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">lazyman</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Lazyman</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">lazyman</span><span class="token punctuation">(</span><span class="token string">&#39;Tom&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">&#39;Lunch&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token string">&#39;Dinner&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sleepFirst</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">&#39;Good night&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输出结果：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Hi I&#39;m Tom
Eat Lunch
Wake up after 3
Eat Dinner
Wake up after 5
Good night
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们通过链式调用 Lazyman 的方法，模拟了一个人的一天生活，可以定时吃饭、睡觉、说话等。实现方式比较简单，就是将不同的任务（如吃饭、睡觉）封装成函数，然后按照一定的顺序依次执行。其中，通过 setTimeout 函数来模拟不同的时间间隔。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最近一次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1003217877@qq.com">leouncle</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/frontHandbook/interview/css.html" class="" aria-label="css"><!--[--><!--]--> css <!--[--><!--]--></a></span><span class="next"><a href="/frontHandbook/interview/vue2.html" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/frontHandbook/assets/app.1d2f7275.js" defer></script>
  </body>
</html>
